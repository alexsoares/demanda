

<br/>
| <%= link_to_remote('Versão para impressão', :update => "listagem", :url => { :action => "relatorio_impressao"}) %>
| <%= link_to_remote('Voltar', :update => "consul", :url => { :action => "consulta"}) %> |<br/><br/>
<div id="listagem">
  <fieldset>
      <legend><font size=4>RELATÓRIO GERAL DE DEMANDA ESCOLAR</font></legend>
        <br/>
        <font style="font-size: 12pt"> DEMANDA GERAL NA REDE: <%= Crianca.demanda_total.length %> </font><br/>
        <br/>
        <font style="font-size: 12pt"> GERAL DE MATRICULAS NA REDE: <%= Crianca.matricula_total.length %> </font><br/>
        <br/>

  <fieldset>
      <legend><font size=3>DEMANDA POR REGIÃO</font></legend>

    <table border="0" width="60%" cellpadding="5" cellspacing="1" >
    <tr>
        <th align="left" style= "font-size: 9pt"> > SÃO JERÔNIMO   : <%= Crianca.find(:all, :conditions => ["matricula != 1 and regiao_id = 1"]).length %></th>
        <th align="left" style= "font-size: 9pt"> > CIDADE JARDIM  : <%= Crianca.find(:all, :conditions => ["matricula != 1 and regiao_id = 2"]).length %></th>
        <th align="left" style= "font-size: 9pt"> > SÃO VITO       : <%= Crianca.find(:all, :conditions => ["matricula != 1 and regiao_id = 3"]).length %></th>
        <th align="left" style= "font-size: 9pt"> > ZANAGA         : <%= Crianca.find(:all, :conditions => ["matricula != 1 and regiao_id = 4"]).length %></th>
    <tr/>
    <tr>
        <th align="left" style= "font-size: 9pt"> > JARDIM IPIRANGA: <%= Crianca.find(:all, :conditions => ["matricula != 1 and regiao_id = 5"]).length %></th>
        <th align="left" style= "font-size: 9pt"> > CENTRO         : <%= Crianca.find(:all, :conditions => ["matricula != 1 and regiao_id = 6"]).length %></th>
        <th align="left" style= "font-size: 9pt"> > PRAIA AZUL     : <%= Crianca.find(:all, :conditions => ["matricula != 1 and regiao_id = 7"]).length %></th>
     </tr>
 </table>
</fieldset>
<br/>
<fieldset>
   <legend><font size=3>DEMANDA GERAL POR UNIDADE</font></legend>
    <table border="0" width="120%" cellpadding="1" cellspacing="1">
      <tr>
       <th align="left" style= "font-size: 8pt"> > ANAJA: <%= Crianca.find(:all, :conditions => ["matricula != 1 and option1 = 15"]).length %></th>
       <th align="left" style= "font-size: 8pt"> > ARACARI: <%= Crianca.find(:all, :conditions => ["matricula != 1 and option1 = 30"]).length %></th>
       <th align="left" style= "font-size: 8pt"> > ARACATI: <%= Crianca.find(:all, :conditions => ["matricula != 1 and option1 = 12"]).length %></th>
       <th align="left" style= "font-size: 8pt"> > ARACY: <%= Crianca.find(:all, :conditions => ["matricula != 1 and option1 = 6"]).length %></th>
       <th align="left" style= "font-size: 8pt"> > ARAPIRANGA: <%= Crianca.find(:all, :conditions => ["matricula != 1 and option1 = 1"]).length %></th>
       <th align="left" style= "font-size: 8pt"> > ARAUNA: <%= Crianca.find(:all, :conditions => ["matricula != 1 and option1 = 9"]).length %></th>
       <th align="left" style= "font-size: 8pt"> > BACURI: <%= Crianca.find(:all, :conditions => ["matricula != 1 and option1 = 37"]).length %></th>
       <th align="left" style= "font-size: 8pt"> > BATUIRA: <%= Crianca.find(:all, :conditions => ["matricula != 1 and option1 = 21"]).length %></th>
       <th align="left" style= "font-size: 8pt"> > BITU: <%= Crianca.find(:all, :conditions => ["matricula != 1 and option1 = 2"]).length %></th>
       <th align="left" style= "font-size: 8pt"> > BORE: <%= Crianca.find(:all, :conditions => ["matricula != 1 and option1 = 33"]).length %></th>
    </tr>
    <tr>
       <th align="left" style= "font-size: 8pt"> > CAIC: <%= Crianca.find(:all, :conditions => ["matricula != 1 and option1 = 7"]).length %></th>
       <th align="left" style= "font-size: 8pt"> > CARANDA: <%= Crianca.find(:all, :conditions => ["matricula != 1 and option1 = 10"]).length %></th>
       <th align="left" style= "font-size: 8pt"> > CECI: <%= Crianca.find(:all, :conditions => ["matricula != 1 and option1 = 34"]).length %></th>
       <th align="left" style= "font-size: 8pt"> > CHUI: <%= Crianca.find(:all, :conditions => ["matricula != 1 and option1 = 16"]).length %></th>
       <th align="left" style= "font-size: 8pt"> > CORIMBO: <%= Crianca.find(:all, :conditions => ["matricula != 1 and option1 = 35"]).length %></th>
       <th align="left" style= "font-size: 8pt"> > CUNHATAI: <%= Crianca.find(:all, :conditions => ["matricula != 1 and option1 = 13"]).length %></th>
       <th align="left" style= "font-size: 8pt"> > CURIMA: <%= Crianca.find(:all, :conditions => ["matricula != 1 and option1 = 23"]).length %></th>
       <th align="left" style= "font-size: 8pt"> > CURUMIM: <%= Crianca.find(:all, :conditions => ["matricula != 1 and option1 = 31"]).length %></th>
       <th align="left" style= "font-size: 8pt"> > CURIO: <%= Crianca.find(:all, :conditions => ["matricula != 1 and option1 = 26"]).length %></th>
       <th align="left" style= "font-size: 8pt"> > GRAUNA: <%= Crianca.find(:all, :conditions => ["matricula != 1 and option1 = 8"]).length %></th>
    </tr>
    <tr>
       <th align="left" style= "font-size: 8pt"> > INDAIA: <%= Crianca.find(:all, :conditions => ["matricula != 1 and option1 = 20"]).length %></th>
       <th align="left" style= "font-size: 8pt"> > JACINA: <%= Crianca.find(:all, :conditions => ["matricula != 1 and option1 = 22"]).length %></th>
       <th align="left" style= "font-size: 8pt"> > JACY: <%= Crianca.find(:all, :conditions => ["matricula != 1 and option1 = 5"]).length %></th>
       <th align="left" style= "font-size: 8pt"> > JURITI:<%= Crianca.find(:all, :conditions => ["matricula != 1 and option1 = 4"]).length %></th>
       <th align="left" style= "font-size: 8pt"> > MAIRA:<%= Crianca.find(:all, :conditions => ["matricula != 1 and option1 = 3"]).length %></th>
       <th align="left" style= "font-size: 8pt"> > MAJOI: <%= Crianca.find(:all, :conditions => ["matricula != 1 and option1 = 24"]).length %></th>
       <th align="left" style= "font-size: 8pt"> > MANACA: <%= Crianca.find(:all, :conditions => ["matricula != 1 and option1 = 41"]).length %><br/>
       <th align="left" style= "font-size: 8pt"> > MANAI: <%= Crianca.find(:all, :conditions => ["matricula != 1 and option1 = 11"]).length %></th>
       <th align="left" style= "font-size: 8pt"> > MARACA: <%= Crianca.find(:all, :conditions => ["matricula != 1 and option1 = 17"]).length %></th>
       <th align="left" style= "font-size: 8pt"> > PANAMBY: <%= Crianca.find(:all, :conditions => ["matricula != 1 and option1 = 40"]).length %><br/>
    </tr>
    <tr>
       <th align="left" style= "font-size: 8pt"> > PATATIVA: <%= Crianca.find(:all, :conditions => ["matricula != 1 and option1 = 29"]).length %></th>
       <th align="left" style= "font-size: 8pt"> > PATURI: <%= Crianca.find(:all, :conditions => ["matricula != 1 and option1 = 19"]).length %></th>
       <th align="left" style= "font-size: 8pt"> > PITANGA: <%= Crianca.find(:all, :conditions => ["matricula != 1 and option1 = 39"]).length %></th>
       <th align="left" style= "font-size: 8pt"> > POTIRA: <%= Crianca.find(:all, :conditions => ["matricula != 1 and option1 = 18"]).length %></th>
       <th align="left" style= "font-size: 8pt"> > SABIA: <%= Crianca.find(:all, :conditions => ["matricula != 1 and option1 = 38"]).length %></th>
       <th align="left" style= "font-size: 8pt"> > TANGARA: <%= Crianca.find(:all, :conditions => ["matricula != 1 and option1 = 36"]).length %></th>
       <th align="left" style= "font-size: 8pt"> > TAPERA: <%= Crianca.find(:all, :conditions => ["matricula != 1 and option1 = 25"]).length %></th>
       <th align="left" style= "font-size: 8pt"> > TARAGUA: <%= Crianca.find(:all, :conditions => ["matricula != 1 and option1 = 27"]).length %></th>
       <th align="left" style= "font-size: 8pt"> > TAHIRA: <%= Crianca.find(:all, :conditions => ["matricula != 1 and option1 = 32"]).length %></th>
       <th align="left" style= "font-size: 8pt"> > URUPE: <%= Crianca.find(:all, :conditions => ["matricula != 1 and option1 = 28"]).length %></th>
      </tr>
  </table>
  </fieldset>
<br/>
<fieldset>
  <legend><font size=3>DEMANDA CRECHE POR UNIDADE</font></legend>
   <table border="0" width="120%" cellpadding="1" cellspacing="1">
      <tr>
       <th align="left" style= "font-size: 8pt"> > ANAJA: <%= Crianca.find_by_sql("select * from (criancas inner join unidades on criancas.unidade_id=unidades.id) inner join grupos on criancas.grupo_id=grupos.id where criancas.unidade_id in (select unidades.id from criancas inner join unidades on criancas.unidade_id=unidades.id where unidades.nome = 'ANAJA') and (grupos.nome = 'BERCARIO I' or grupos.nome = 'BERCARIO II' OR grupos.nome = 'BERCARIO III' OR grupos.nome = 'MATERNAL I' OR grupos.nome = 'MATERNAL II')").length%></th>
       <th align="left" style= "font-size: 8pt"> > ARAPIRANGA: <%= Crianca.find_by_sql("select * from (criancas inner join unidades on criancas.unidade_id=unidades.id) inner join grupos on criancas.grupo_id=grupos.id where criancas.unidade_id in (select unidades.id from criancas inner join unidades on criancas.unidade_id=unidades.id where unidades.nome = 'ARAPIRANGA') and (grupos.nome = 'BERCARIO I' or grupos.nome = 'BERCARIO II' OR grupos.nome = 'BERCARIO III' OR grupos.nome = 'MATERNAL I' OR grupos.nome = 'MATERNAL II')").length %></th>
       <th align="left" style= "font-size: 8pt"> > ARAUNA: <%= Crianca.find_by_sql("select * from (criancas inner join unidades on criancas.unidade_id=unidades.id) inner join grupos on criancas.grupo_id=grupos.id where criancas.unidade_id in (select unidades.id from criancas inner join unidades on criancas.unidade_id=unidades.id where unidades.nome = 'ARANUNA') and (grupos.nome = 'BERCARIO I' or grupos.nome = 'BERCARIO II' OR grupos.nome = 'BERCARIO III' OR grupos.nome = 'MATERNAL I' OR grupos.nome = 'MATERNAL II')").length %></th>
       <th align="left" style= "font-size: 8pt"> > BITU: <%= Crianca.find_by_sql("select * from (criancas inner join unidades on criancas.unidade_id=unidades.id) inner join grupos on criancas.grupo_id=grupos.id where criancas.unidade_id in (select unidades.id from criancas inner join unidades on criancas.unidade_id=unidades.id where unidades.nome = 'BITU') and (grupos.nome = 'BERCARIO I' or grupos.nome = 'BERCARIO II' OR grupos.nome = 'BERCARIO III' OR grupos.nome = 'MATERNAL I' OR grupos.nome = 'MATERNAL II')").length %></th>
       <th align="left" style= "font-size: 8pt"> > CAIC: <%= Crianca.find_by_sql("select * from (criancas inner join unidades on criancas.unidade_id=unidades.id) inner join grupos on criancas.grupo_id=grupos.id where criancas.unidade_id in (select unidades.id from criancas inner join unidades on criancas.unidade_id=unidades.id where unidades.nome = 'CAIC') and (grupos.nome = 'BERCARIO I' or grupos.nome = 'BERCARIO II' OR grupos.nome = 'BERCARIO III' OR grupos.nome = 'MATERNAL I' OR grupos.nome = 'MATERNAL II')").length %></th>
       <th align="left" style= "font-size: 8pt"> > CHUI: <%= Crianca.find_by_sql("select * from (criancas inner join unidades on criancas.unidade_id=unidades.id) inner join grupos on criancas.grupo_id=grupos.id where criancas.unidade_id in (select unidades.id from criancas inner join unidades on criancas.unidade_id=unidades.id where unidades.nome = 'CHUI') and (grupos.nome = 'BERCARIO I' or grupos.nome = 'BERCARIO II' OR grupos.nome = 'BERCARIO III' OR grupos.nome = 'MATERNAL I' OR grupos.nome = 'MATERNAL II')").length %></th>
       <th align="left" style= "font-size: 8pt"> > CURIMA: <%= Crianca.find_by_sql("select * from (criancas inner join unidades on criancas.unidade_id=unidades.id) inner join grupos on criancas.grupo_id=grupos.id where criancas.unidade_id in (select unidades.id from criancas inner join unidades on criancas.unidade_id=unidades.id where unidades.nome = 'CURIMA') and (grupos.nome = 'BERCARIO I' or grupos.nome = 'BERCARIO II' OR grupos.nome = 'BERCARIO III' OR grupos.nome = 'MATERNAL I' OR grupos.nome = 'MATERNAL II')").length %></th>
       <th align="left" style= "font-size: 8pt"> > CURIO: <%= Crianca.find_by_sql("select * from (criancas inner join unidades on criancas.unidade_id=unidades.id) inner join grupos on criancas.grupo_id=grupos.id where criancas.unidade_id in (select unidades.id from criancas inner join unidades on criancas.unidade_id=unidades.id where unidades.nome = 'CUIRO') and (grupos.nome = 'BERCARIO I' or grupos.nome = 'BERCARIO II' OR grupos.nome = 'BERCARIO III' OR grupos.nome = 'MATERNAL I' OR grupos.nome = 'MATERNAL II')").length %></th>
       <th align="left" style= "font-size: 8pt"> > GRAUNA: <%= Crianca.find_by_sql("select * from (criancas inner join unidades on criancas.unidade_id=unidades.id) inner join grupos on criancas.grupo_id=grupos.id where criancas.unidade_id in (select unidades.id from criancas inner join unidades on criancas.unidade_id=unidades.id where unidades.nome = 'GRAUNA') and (grupos.nome = 'BERCARIO I' or grupos.nome = 'BERCARIO II' OR grupos.nome = 'BERCARIO III' OR grupos.nome = 'MATERNAL I' OR grupos.nome = 'MATERNAL II')").length %></th>
       <th align="left" style= "font-size: 8pt"> > JURITI: <%= Crianca.find_by_sql("select * from (criancas inner join unidades on criancas.unidade_id=unidades.id) inner join grupos on criancas.grupo_id=grupos.id where criancas.unidade_id in (select unidades.id from criancas inner join unidades on criancas.unidade_id=unidades.id where unidades.nome = 'JURITI') and (grupos.nome = 'BERCARIO I' or grupos.nome = 'BERCARIO II' OR grupos.nome = 'BERCARIO III' OR grupos.nome = 'MATERNAL I' OR grupos.nome = 'MATERNAL II')").length %></th>
    </tr>
    <tr>
      <th align="left" style= "font-size: 8pt"> > MAIRA:<%= Crianca.find_by_sql("select * from (criancas inner join unidades on criancas.unidade_id=unidades.id) inner join grupos on criancas.grupo_id=grupos.id where criancas.unidade_id in (select unidades.id from criancas inner join unidades on criancas.unidade_id=unidades.id where unidades.nome = 'MAIRA') and (grupos.nome = 'BERCARIO I' or grupos.nome = 'BERCARIO II' OR grupos.nome = 'BERCARIO III' OR grupos.nome = 'MATERNAL I' OR grupos.nome = 'MATERNAL II')").length%></th>
      <th align="left" style= "font-size: 8pt"> > MAJOI: <%= Crianca.find_by_sql("select * from (criancas inner join unidades on criancas.unidade_id=unidades.id) inner join grupos on criancas.grupo_id=grupos.id where criancas.unidade_id in (select unidades.id from criancas inner join unidades on criancas.unidade_id=unidades.id where unidades.nome = 'MAJOI') and (grupos.nome = 'BERCARIO I' or grupos.nome = 'BERCARIO II' OR grupos.nome = 'BERCARIO III' OR grupos.nome = 'MATERNAL I' OR grupos.nome = 'MATERNAL II')").length%></th>
      <th align="left" style= "font-size: 8pt"> > MANACA: <%= Crianca.find_by_sql("select * from (criancas inner join unidades on criancas.unidade_id=unidades.id) inner join grupos on criancas.grupo_id=grupos.id where criancas.unidade_id in (select unidades.id from criancas inner join unidades on criancas.unidade_id=unidades.id where unidades.nome = 'MANACA') and (grupos.nome = 'BERCARIO I' or grupos.nome = 'BERCARIO II' OR grupos.nome = 'BERCARIO III' OR grupos.nome = 'MATERNAL I' OR grupos.nome = 'MATERNAL II')").length%></th>
      <th align="left" style= "font-size: 8pt"> > MARACA: <%= Crianca.find_by_sql("select * from (criancas inner join unidades on criancas.unidade_id=unidades.id) inner join grupos on criancas.grupo_id=grupos.id where criancas.unidade_id in (select unidades.id from criancas inner join unidades on criancas.unidade_id=unidades.id where unidades.nome = 'MARACA') and (grupos.nome = 'BERCARIO I' or grupos.nome = 'BERCARIO II' OR grupos.nome = 'BERCARIO III' OR grupos.nome = 'MATERNAL I' OR grupos.nome = 'MATERNAL II')").length%></th>
      <th align="left" style= "font-size: 8pt"> > PANAMBY: <%= Crianca.find_by_sql("select * from (criancas inner join unidades on criancas.unidade_id=unidades.id) inner join grupos on criancas.grupo_id=grupos.id where criancas.unidade_id in (select unidades.id from criancas inner join unidades on criancas.unidade_id=unidades.id where unidades.nome = 'PANABY') and (grupos.nome = 'BERCARIO I' or grupos.nome = 'BERCARIO II' OR grupos.nome = 'BERCARIO III' OR grupos.nome = 'MATERNAL I' OR grupos.nome = 'MATERNAL II')").length%></th>
      <th align="left" style= "font-size: 8pt"> > PITANGA: <%= Crianca.find_by_sql("select * from (criancas inner join unidades on criancas.unidade_id=unidades.id) inner join grupos on criancas.grupo_id=grupos.id where criancas.unidade_id in (select unidades.id from criancas inner join unidades on criancas.unidade_id=unidades.id where unidades.nome = 'PITANGA') and (grupos.nome = 'BERCARIO I' or grupos.nome = 'BERCARIO II' OR grupos.nome = 'BERCARIO III' OR grupos.nome = 'MATERNAL I' OR grupos.nome = 'MATERNAL II')").length%></th>
      <th align="left" style= "font-size: 8pt"> > TAPERA: <%= Crianca.find_by_sql("select * from (criancas inner join unidades on criancas.unidade_id=unidades.id) inner join grupos on criancas.grupo_id=grupos.id where criancas.unidade_id in (select unidades.id from criancas inner join unidades on criancas.unidade_id=unidades.id where unidades.nome = 'TAPERA') and (grupos.nome = 'BERCARIO I' or grupos.nome = 'BERCARIO II' OR grupos.nome = 'BERCARIO III' OR grupos.nome = 'MATERNAL I' OR grupos.nome = 'MATERNAL II')").length%></th>
      <th align="left" style= "font-size: 8pt"> > TARAGUA: <%= Crianca.find_by_sql("select * from (criancas inner join unidades on criancas.unidade_id=unidades.id) inner join grupos on criancas.grupo_id=grupos.id where criancas.unidade_id in (select unidades.id from criancas inner join unidades on criancas.unidade_id=unidades.id where unidades.nome = 'TANGARA') and (grupos.nome = 'BERCARIO I' or grupos.nome = 'BERCARIO II' OR grupos.nome = 'BERCARIO III' OR grupos.nome = 'MATERNAL I' OR grupos.nome = 'MATERNAL II')").length%></th>
      <th align="left" style= "font-size: 8pt"> > TAHIRA: <%= Crianca.find_by_sql("select * from (criancas inner join unidades on criancas.unidade_id=unidades.id) inner join grupos on criancas.grupo_id=grupos.id where criancas.unidade_id in (select unidades.id from criancas inner join unidades on criancas.unidade_id=unidades.id where unidades.nome = 'TAHIRA') and (grupos.nome = 'BERCARIO I' or grupos.nome = 'BERCARIO II' OR grupos.nome = 'BERCARIO III' OR grupos.nome = 'MATERNAL I' OR grupos.nome = 'MATERNAL II')").length%></th>
      <th align="left" style= "font-size: 8pt"> > URUPE: <%= Crianca.find_by_sql("select * from (criancas inner join unidades on criancas.unidade_id=unidades.id) inner join grupos on criancas.grupo_id=grupos.id where criancas.unidade_id in (select unidades.id from criancas inner join unidades on criancas.unidade_id=unidades.id where unidades.nome = 'URUPE') and (grupos.nome = 'BERCARIO I' or grupos.nome = 'BERCARIO II' OR grupos.nome = 'BERCARIO III' OR grupos.nome = 'MATERNAL I' OR grupos.nome = 'MATERNAL II')").length%></th>
     </tr>
  </table>
  </fieldset>
<br/>
<fieldset>
   <legend><font size=3>DEMANDA EMEI POR UNIDADE</font></legend>
    <table border="0" width="120%" cellpadding="1" cellspacing="1">
      <tr>
       <th align="left" style= "font-size: 8pt"> > ARACARI: <%= Crianca.find_by_sql("select * from (criancas inner join unidades on criancas.unidade_id=unidades.id) inner join grupos on criancas.grupo_id=grupos.id where criancas.unidade_id in (select unidades.id from criancas inner join unidades on criancas.unidade_id=unidades.id where unidades.nome = 'ARACARI') and (grupos.nome = 'NIVEL I' or grupos.nome = 'NIVEL II')").length%></th>
       <th align="left" style= "font-size: 8pt"> > ARACATI: <%= Crianca.find_by_sql("select * from (criancas inner join unidades on criancas.unidade_id=unidades.id) inner join grupos on criancas.grupo_id=grupos.id where criancas.unidade_id in (select unidades.id from criancas inner join unidades on criancas.unidade_id=unidades.id where unidades.nome = 'ARACATI') and (grupos.nome = 'NIVEL I' or grupos.nome = 'NIVEL II')").length%></th>
       <th align="left" style= "font-size: 8pt"> > ARACY: <%= Crianca.find_by_sql("select * from (criancas inner join unidades on criancas.unidade_id=unidades.id) inner join grupos on criancas.grupo_id=grupos.id where criancas.unidade_id in (select unidades.id from criancas inner join unidades on criancas.unidade_id=unidades.id where unidades.nome = 'ARACY') and (grupos.nome = 'NIVEL I' or grupos.nome = 'NIVEL II')").length%></th>
       <th align="left" style= "font-size: 8pt"> > ARAPIRANGA: <%= Crianca.find_by_sql("select * from (criancas inner join unidades on criancas.unidade_id=unidades.id) inner join grupos on criancas.grupo_id=grupos.id where criancas.unidade_id in (select unidades.id from criancas inner join unidades on criancas.unidade_id=unidades.id where unidades.nome = 'ARAPIRANGA') and (grupos.nome = 'NIVEL I' or grupos.nome = 'NIVEL II')").length%></th>
       <th align="left" style= "font-size: 8pt"> > ARAUNA: <%= Crianca.find_by_sql("select * from (criancas inner join unidades on criancas.unidade_id=unidades.id) inner join grupos on criancas.grupo_id=grupos.id where criancas.unidade_id in (select unidades.id from criancas inner join unidades on criancas.unidade_id=unidades.id where unidades.nome = 'ARAUNA') and (grupos.nome = 'NIVEL I' or grupos.nome = 'NIVEL II')").length%></th>
       <th align="left" style= "font-size: 8pt"> > BACURI: <%= Crianca.find_by_sql("select * from (criancas inner join unidades on criancas.unidade_id=unidades.id) inner join grupos on criancas.grupo_id=grupos.id where criancas.unidade_id in (select unidades.id from criancas inner join unidades on criancas.unidade_id=unidades.id where unidades.nome = 'BACURI') and (grupos.nome = 'NIVEL I' or grupos.nome = 'NIVEL II')").length%></th>
       <th align="left" style= "font-size: 8pt"> > BATUIRA: <%= Crianca.find_by_sql("select * from (criancas inner join unidades on criancas.unidade_id=unidades.id) inner join grupos on criancas.grupo_id=grupos.id where criancas.unidade_id in (select unidades.id from criancas inner join unidades on criancas.unidade_id=unidades.id where unidades.nome = 'BATUIRA') and (grupos.nome = 'NIVEL I' or grupos.nome = 'NIVEL II')").length%></th>
       <th align="left" style= "font-size: 8pt"> > BITU: <%= Crianca.find_by_sql("select * from (criancas inner join unidades on criancas.unidade_id=unidades.id) inner join grupos on criancas.grupo_id=grupos.id where criancas.unidade_id in (select unidades.id from criancas inner join unidades on criancas.unidade_id=unidades.id where unidades.nome = 'BUTI') and (grupos.nome = 'NIVEL I' or grupos.nome = 'NIVEL II')").length%></th>
       <th align="left" style= "font-size: 8pt"> > BORE: <%= Crianca.find_by_sql("select * from (criancas inner join unidades on criancas.unidade_id=unidades.id) inner join grupos on criancas.grupo_id=grupos.id where criancas.unidade_id in (select unidades.id from criancas inner join unidades on criancas.unidade_id=unidades.id where unidades.nome = 'BORE') and (grupos.nome = 'NIVEL I' or grupos.nome = 'NIVEL II')").length%></th>
    </tr>
    <tr>
       <th align="left" style= "font-size: 8pt"> > CARANDA: <%= Crianca.find_by_sql("select * from (criancas inner join unidades on criancas.unidade_id=unidades.id) inner join grupos on criancas.grupo_id=grupos.id where criancas.unidade_id in (select unidades.id from criancas inner join unidades on criancas.unidade_id=unidades.id where unidades.nome = 'CARANDA') and (grupos.nome = 'NIVEL I' or grupos.nome = 'NIVEL II')").length%></th>
       <th align="left" style= "font-size: 8pt"> > CECI: <%= Crianca.find_by_sql("select * from (criancas inner join unidades on criancas.unidade_id=unidades.id) inner join grupos on criancas.grupo_id=grupos.id where criancas.unidade_id in (select unidades.id from criancas inner join unidades on criancas.unidade_id=unidades.id where unidades.nome = 'CECI') and (grupos.nome = 'NIVEL I' or grupos.nome = 'NIVEL II')").length%></th>
       <th align="left" style= "font-size: 8pt"> > CORIMBO: <%= Crianca.find_by_sql("select * from (criancas inner join unidades on criancas.unidade_id=unidades.id) inner join grupos on criancas.grupo_id=grupos.id where criancas.unidade_id in (select unidades.id from criancas inner join unidades on criancas.unidade_id=unidades.id where unidades.nome = 'CURIMBO') and (grupos.nome = 'NIVEL I' or grupos.nome = 'NIVEL II')").length%></th>
       <th align="left" style= "font-size: 8pt"> > CUNHATAI: <%= Crianca.find_by_sql("select * from (criancas inner join unidades on criancas.unidade_id=unidades.id) inner join grupos on criancas.grupo_id=grupos.id where criancas.unidade_id in (select unidades.id from criancas inner join unidades on criancas.unidade_id=unidades.id where unidades.nome = 'CUNHATAI') and (grupos.nome = 'NIVEL I' or grupos.nome = 'NIVEL II')").length%></th>
       <th align="left" style= "font-size: 8pt"> > CURUMIM: <%= Crianca.find_by_sql("select * from (criancas inner join unidades on criancas.unidade_id=unidades.id) inner join grupos on criancas.grupo_id=grupos.id where criancas.unidade_id in (select unidades.id from criancas inner join unidades on criancas.unidade_id=unidades.id where unidades.nome = 'CURUMIM') and (grupos.nome = 'NIVEL I' or grupos.nome = 'NIVEL II')").length%></th>
       <th align="left" style= "font-size: 8pt"> > CURIO: <%= Crianca.find_by_sql("select * from (criancas inner join unidades on criancas.unidade_id=unidades.id) inner join grupos on criancas.grupo_id=grupos.id where criancas.unidade_id in (select unidades.id from criancas inner join unidades on criancas.unidade_id=unidades.id where unidades.nome = 'CURIO') and (grupos.nome = 'NIVEL I' or grupos.nome = 'NIVEL II')").length%></th>
       <th align="left" style= "font-size: 8pt"> > GRAUNA: <%= Crianca.find_by_sql("select * from (criancas inner join unidades on criancas.unidade_id=unidades.id) inner join grupos on criancas.grupo_id=grupos.id where criancas.unidade_id in (select unidades.id from criancas inner join unidades on criancas.unidade_id=unidades.id where unidades.nome = 'GRAUNA') and (grupos.nome = 'NIVEL I' or grupos.nome = 'NIVEL II')").length%></th>
       <th align="left" style= "font-size: 8pt"> > INDAIA: <%= Crianca.find_by_sql("select * from (criancas inner join unidades on criancas.unidade_id=unidades.id) inner join grupos on criancas.grupo_id=grupos.id where criancas.unidade_id in (select unidades.id from criancas inner join unidades on criancas.unidade_id=unidades.id where unidades.nome = 'INDAIA') and (grupos.nome = 'NIVEL I' or grupos.nome = 'NIVEL II')").length%></th>
       <th align="left" style= "font-size: 8pt"> > JACINA: <%= Crianca.find_by_sql("select * from (criancas inner join unidades on criancas.unidade_id=unidades.id) inner join grupos on criancas.grupo_id=grupos.id where criancas.unidade_id in (select unidades.id from criancas inner join unidades on criancas.unidade_id=unidades.id where unidades.nome = 'JACINA') and (grupos.nome = 'NIVEL I' or grupos.nome = 'NIVEL II')").length%></th>
    </tr>
    <tr>
       <th align="left" style= "font-size: 8pt"> > JACY: <%= Crianca.find(:all, :conditions => ["matricula != 1 and option1 = 5"]).length %></th>
       <th align="left" style= "font-size: 8pt"> > JURITI:<%= Crianca.find(:all, :conditions => ["matricula != 1 and option1 = 4"]).length %></th>
       <th align="left" style= "font-size: 8pt"> > MAIRA:<%= Crianca.find(:all, :conditions => ["matricula != 1 and option1 = 3"]).length %></th>
       <th align="left" style= "font-size: 8pt"> > MANACA: <%= Crianca.find(:all, :conditions => ["matricula != 1 and option1 = 41"]).length %><br/>
       <th align="left" style= "font-size: 8pt"> > MANAI: <%= Crianca.find(:all, :conditions => ["matricula != 1 and option1 = 11"]).length %></th>
       <th align="left" style= "font-size: 8pt"> > MARACA: <%= Crianca.find(:all, :conditions => ["matricula != 1 and option1 = 17"]).length %></th>
       <th align="left" style= "font-size: 8pt"> > PANAMBY: <%= Crianca.find(:all, :conditions => ["matricula != 1 and option1 = 40"]).length %><br/>
       <th align="left" style= "font-size: 8pt"> > PATATIVA: <%= Crianca.find(:all, :conditions => ["matricula != 1 and option1 = 29"]).length %></th>
       <th align="left" style= "font-size: 8pt"> > PATURI: <%= Crianca.find(:all, :conditions => ["matricula != 1 and option1 = 19"]).length %></th>
    </tr>
    <tr>

       <th align="left" style= "font-size: 8pt"> > PITANGA: <%= Crianca.find(:all, :conditions => ["matricula != 1 and option1 = 39"]).length %></th>
       <th align="left" style= "font-size: 8pt"> > POTIRA: <%= Crianca.find(:all, :conditions => ["matricula != 1 and option1 = 18"]).length %></th>
       <th align="left" style= "font-size: 8pt"> > SABIA: <%= Crianca.find(:all, :conditions => ["matricula != 1 and option1 = 38"]).length %></th>
       <th align="left" style= "font-size: 8pt"> > TANGARA: <%= Crianca.find(:all, :conditions => ["matricula != 1 and option1 = 36"]).length %></th>
       <th align="left" style= "font-size: 8pt"> > TAPERA: <%= Crianca.find(:all, :conditions => ["matricula != 1 and option1 = 25"]).length %></th>
       <th align="left" style= "font-size: 8pt"> > TARAGUA: <%= Crianca.find(:all, :conditions => ["matricula != 1 and option1 = 27"]).length %></th>
       <th align="left" style= "font-size: 8pt"> > TAHIRA: <%= Crianca.find(:all, :conditions => ["matricula != 1 and option1 = 32"]).length %></th>
       <th align="left" style= "font-size: 8pt"> > URUPE: <%= Crianca.find(:all, :conditions => ["matricula != 1 and option1 = 28"]).length %></th>
      </tr>
  </table>
  </fieldset>
<br/>
<fieldset>
   <legend><font size=3>MATRICULA POR UNIDADE</font></legend>

    <table border="0" width="120%" cellpadding="1" cellspacing="1">
      <tr>
       <th align="left" style= "font-size: 8pt"> > ANAJA: <%= Crianca.find(:all, :conditions => ["matricula != 0 and unidade_matricula = 15"]).length %></th>
       <th align="left" style= "font-size: 8pt"> > ARACARI: <%= Crianca.find(:all, :conditions => ["matricula != 0 and unidade_matricula = 30"]).length %></th>
       <th align="left" style= "font-size: 8pt"> > ARACATI: <%= Crianca.find(:all, :conditions => ["matricula != 0 and unidade_matricula = 12"]).length %></th>
       <th align="left" style= "font-size: 8pt"> > ARACY: <%= Crianca.find(:all, :conditions => ["matricula != 0 and unidade_matricula = 6"]).length %></th>
       <th align="left" style= "font-size: 8pt"> > ARAPIRANGA: <%= Crianca.find(:all, :conditions => ["matricula != 0 and unidade_matricula = 1"]).length %></th>
       <th align="left" style= "font-size: 8pt"> > ARAUNA: <%= Crianca.find(:all, :conditions => ["matricula != 0 and unidade_matricula = 9"]).length %></th>
       <th align="left" style= "font-size: 8pt"> > BACURI: <%= Crianca.find(:all, :conditions => ["matricula != 0 and unidade_matricula = 37"]).length %></th>
       <th align="left" style= "font-size: 8pt"> > BATUIRA: <%= Crianca.find(:all, :conditions => ["matricula != 0 and unidade_matricula = 21"]).length %></th>
       <th align="left" style= "font-size: 8pt"> > BITU: <%= Crianca.find(:all, :conditions => ["matricula != 0 and unidade_matricula = 2"]).length %></th>
       <th align="left" style= "font-size: 8pt"> > BORE: <%= Crianca.find(:all, :conditions => ["matricula != 0 and unidade_matricula = 33"]).length %></th>
    </tr>
    <tr>
       <th align="left" style= "font-size: 8pt"> > CAIC: <%= Crianca.find(:all, :conditions => ["matricula != 0 and unidade_matricula = 7"]).length %></th>
       <th align="left" style= "font-size: 8pt"> > CARANDA: <%= Crianca.find(:all, :conditions => ["matricula != 0 and unidade_matricula = 10"]).length %></th>
       <th align="left" style= "font-size: 8pt"> > CECI: <%= Crianca.find(:all, :conditions => ["matricula != 0 and unidade_matricula = 34"]).length %></th>
       <th align="left" style= "font-size: 8pt"> > CHUI: <%= Crianca.find(:all, :conditions => ["matricula != 0 and unidade_matricula = 16"]).length %></th>
       <th align="left" style= "font-size: 8pt"> > CORIMBO: <%= Crianca.find(:all, :conditions => ["matricula != 0 and unidade_matricula = 35"]).length %></th>
       <th align="left" style= "font-size: 8pt"> > CUNHATAI: <%= Crianca.find(:all, :conditions => ["matricula != 0 and unidade_matricula = 13"]).length %></th>
       <th align="left" style= "font-size: 8pt"> > CURIMA: <%= Crianca.find(:all, :conditions => ["matricula != 0 and unidade_matricula = 23"]).length %></th>
       <th align="left" style= "font-size: 8pt"> > CURUMIM: <%= Crianca.find(:all, :conditions => ["matricula != 0 and unidade_matricula = 31"]).length %></th>
       <th align="left" style= "font-size: 8pt"> > CURIO: <%= Crianca.find(:all, :conditions => ["matricula != 0 and unidade_matricula = 26"]).length %></th>
       <th align="left" style= "font-size: 8pt"> > GRAUNA: <%= Crianca.find(:all, :conditions => ["matricula != 0 and unidade_matricula = 8"]).length %></th>
    </tr>
    <tr>
       <th align="left" style= "font-size: 8pt"> > INDAIA: <%= Crianca.find(:all, :conditions => ["matricula != 0 and unidade_matricula = 20"]).length %></th>
       <th align="left" style= "font-size: 8pt"> > JACINA: <%= Crianca.find(:all, :conditions => ["matricula != 0 and unidade_matricula = 22"]).length %></th>
       <th align="left" style= "font-size: 8pt"> > JACY: <%= Crianca.find(:all, :conditions => ["matricula != 0 and unidade_matricula = 5"]).length %></th>
       <th align="left" style= "font-size: 8pt"> > JURITI:<%= Crianca.find(:all, :conditions => ["matricula != 0 and unidade_matricula = 4"]).length %></th>
       <th align="left" style= "font-size: 8pt"> > MAIRA:<%= Crianca.find(:all, :conditions => ["matricula != 0 and unidade_matricula = 3"]).length %></th>
       <th align="left" style= "font-size: 8pt"> > MAJOI: <%= Crianca.find(:all, :conditions => ["matricula != 0 and unidade_matricula = 24"]).length %></th>
       <th align="left" style= "font-size: 8pt"> > MANACA: <%= Crianca.find(:all, :conditions => ["matricula != 0 and unidade_matricula = 41"]).length %><br/>
       <th align="left" style= "font-size: 8pt"> > MANAI: <%= Crianca.find(:all, :conditions => ["matricula != 0 and unidade_matricula = 11"]).length %></th>
       <th align="left" style= "font-size: 8pt"> > MARACA: <%= Crianca.find(:all, :conditions => ["matricula != 0 and unidade_matricula = 17"]).length %></th>
       <th align="left" style= "font-size: 8pt"> > PANAMBY: <%= Crianca.find(:all, :conditions => ["matricula != 0 and unidade_matricula = 40"]).length %><br/>
    </tr>
    <tr>
       <th align="left" style= "font-size: 8pt"> > PATATIVA: <%= Crianca.find(:all, :conditions => ["matricula != 0 and unidade_matricula = 29"]).length %></th>
       <th align="left" style= "font-size: 8pt"> > PATURI: <%= Crianca.find(:all, :conditions => ["matricula != 0 and unidade_matricula = 19"]).length %></th>
       <th align="left" style= "font-size: 8pt"> > PITANGA: <%= Crianca.find(:all, :conditions => ["matricula != 0 and unidade_matricula = 39"]).length %></th>
       <th align="left" style= "font-size: 8pt"> > POTIRA: <%= Crianca.find(:all, :conditions => ["matricula != 0 and unidade_matricula = 18"]).length %></th>
       <th align="left" style= "font-size: 8pt"> > SABIA: <%= Crianca.find(:all, :conditions => ["matricula != 0 and unidade_matricula = 38"]).length %></th>
       <th align="left" style= "font-size: 8pt"> > TANGARA: <%= Crianca.find(:all, :conditions => ["matricula != 0 and unidade_matricula = 36"]).length %></th>
       
       <th align="left" style= "font-size: 8pt"> > TARAGUA: <%= Crianca.find(:all, :conditions => ["matricula != 0 and unidade_matricula = 27"]).length %></th>
       <th align="left" style= "font-size: 8pt"> > TAHIRA: <%= Crianca.find(:all, :conditions => ["matricula != 0 and unidade_matricula = 32"]).length %></th>
       <th align="left" style= "font-size: 8pt"> > URUPE: <%= Crianca.find(:all, :conditions => ["matricula != 0 and unidade_matricula = 28"]).length %></th>
      </tr>
  </table>
  </fieldset>





 </fieldset>
<br/><br/>
</div>
| <%= link_to_remote('Versão para impressão', :update => "listagem", :url => { :action => "relatorio_impressao"}) %> |  <%= link_to_remote('Voltar', :update => "consul", :url => { :action => "consulta"}) %> |

